{% extends "base.html" %}

{% block title %}å®‰å…¨è®¾ç½®{% endblock %}

{% block content %}
<div class="container">
    <div class="security-settings">
        <h2>å®‰å…¨è®¾ç½®</h2>
        
        <!-- å¯†ç ç®¡ç† -->
        <div class="security-card">
            <h3>ğŸ” å¯†ç ç®¡ç†</h3>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">ä¿®æ”¹å¯†ç </div>
                    <div class="security-item-desc">å®šæœŸæ›´æ¢å¯†ç å¯ä»¥æé«˜è´¦æˆ·å®‰å…¨æ€§</div>
                </div>
                <div class="security-item-action">
                    <a href="{{ url_for('user.change_password') }}" class="btn btn-primary">ä¿®æ”¹å¯†ç </a>
                </div>
            </div>
            
            {% if current_user.password_hash %}
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">å¯†ç å¼ºåº¦</div>
                    <div class="security-item-desc">å½“å‰å¯†ç å¼ºåº¦è¯„ä¼°</div>
                </div>
                <div class="security-item-action">
                    <span class="badge badge-success">å·²è®¾ç½®</span>
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- è´¦æˆ·ä¿¡æ¯ -->
        <div class="security-card">
            <h3>ğŸ‘¤ è´¦æˆ·ä¿¡æ¯</h3>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">ç”¨æˆ·å</div>
                    <div class="security-item-desc">{{ current_user.username }}</div>
                </div>
                <div class="security-item-action">
                    <a href="{{ url_for('user.edit_profile') }}" class="btn btn-secondary">ç¼–è¾‘èµ„æ–™</a>
                </div>
            </div>
            
            {% if current_user.email %}
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">é‚®ç®±åœ°å€</div>
                    <div class="security-item-desc">{{ current_user.email }}</div>
                </div>
                <div class="security-item-action">
                    <span class="badge badge-success">å·²éªŒè¯</span>
                </div>
            </div>
            {% else %}
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">é‚®ç®±åœ°å€</div>
                    <div class="security-item-desc">æœªè®¾ç½®é‚®ç®±ï¼Œæ— æ³•ä½¿ç”¨å¯†ç æ‰¾å›åŠŸèƒ½</div>
                </div>
                <div class="security-item-action">
                    <a href="{{ url_for('user.edit_profile') }}" class="btn btn-warning">è®¾ç½®é‚®ç®±</a>
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- ç™»å½•å®‰å…¨ -->
        <div class="security-card">
            <h3>ğŸ›¡ï¸ ç™»å½•å®‰å…¨</h3>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">æœ€åç™»å½•æ—¶é—´</div>
                    <div class="security-item-desc">æ˜¾ç¤ºæ‚¨æœ€è¿‘ä¸€æ¬¡ç™»å½•çš„æ—¶é—´</div>
                </div>
                <div class="security-item-action">
                    <span class="text-muted">åŠŸèƒ½å¼€å‘ä¸­</span>
                </div>
            </div>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">ç™»å½•å†å²</div>
                    <div class="security-item-desc">æŸ¥çœ‹æœ€è¿‘çš„ç™»å½•è®°å½•å’Œå¼‚å¸¸ç™»å½•æé†’</div>
                </div>
                <div class="security-item-action">
                    <span class="text-muted">åŠŸèƒ½å¼€å‘ä¸­</span>
                </div>
            </div>
        </div>
        
        <!-- éšç§è®¾ç½® -->
        <div class="security-card">
            <h3>ğŸ”’ éšç§è®¾ç½®</h3>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">è”ç³»æ–¹å¼æ˜¾ç¤º</div>
                    <div class="security-item-desc">æ§åˆ¶å…¶ä»–ç”¨æˆ·æ˜¯å¦å¯ä»¥çœ‹åˆ°æ‚¨çš„è”ç³»æ–¹å¼</div>
                </div>
                <div class="security-item-action">
                    <a href="{{ url_for('user.edit_profile') }}" class="btn btn-secondary">ç®¡ç†</a>
                </div>
            </div>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">ä¸ªäººèµ„æ–™å¯è§æ€§</div>
                    <div class="security-item-desc">æ§åˆ¶ä¸ªäººèµ„æ–™å¯¹å…¶ä»–ç”¨æˆ·çš„å¯è§ç¨‹åº¦</div>
                </div>
                <div class="security-item-action">
                    <span class="text-muted">åŠŸèƒ½å¼€å‘ä¸­</span>
                </div>
            </div>
        </div>
        
        <!-- å±é™©æ“ä½œ -->
        <div class="security-card border-danger">
            <h3 class="text-danger">âš ï¸ å±é™©æ“ä½œ</h3>
            
            <div class="security-item">
                <div class="security-item-info">
                    <div class="security-item-title">æ³¨é”€è´¦æˆ·</div>
                    <div class="security-item-desc">æ°¸ä¹…åˆ é™¤æ‚¨çš„è´¦æˆ·å’Œæ‰€æœ‰ç›¸å…³æ•°æ®ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤</div>
                </div>
                <div class="security-item-action">
                    <button class="btn btn-danger" onclick="confirmDeleteAccount()">æ³¨é”€è´¦æˆ·</button>
                </div>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/password-strength.css') }}">

<script>
function confirmDeleteAccount() {
    if (confirm('ç¡®å®šè¦æ³¨é”€è´¦æˆ·å—ï¼Ÿæ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤æ‚¨çš„æ‰€æœ‰æ•°æ®ï¼Œä¸”ä¸å¯æ¢å¤ï¼')) {
        if (confirm('è¯·å†æ¬¡ç¡®è®¤ï¼šæ‚¨çœŸçš„è¦åˆ é™¤è´¦æˆ·å—ï¼Ÿ')) {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ³¨é”€è´¦æˆ·çš„é€»è¾‘
            alert('è´¦æˆ·æ³¨é”€åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
    }
}
</script>

<style>
.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 20px;
}

.security-settings h2 {
    text-align: center;
    margin-bottom: 30px;
    color: #495057;
}

.border-danger {
    border: 1px solid #dc3545 !important;
}

.text-danger {
    color: #dc3545 !important;
}

.text-muted {
    color: #6c757d !important;
}

.badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
}

.badge-success {
    background-color: #28a745;
    color: white;
}

.badge-warning {
    background-color: #ffc107;
    color: #212529;
}

.btn-warning {
    background-color: #ffc107;
    color: #212529;
    border-color: #ffc107;
}

.btn-warning:hover {
    background-color: #e0a800;
    border-color: #d39e00;
}

.btn-danger {
    background-color: #dc3545;
    color: white;
    border-color: #dc3545;
}

.btn-danger:hover {
    background-color: #c82333;
    border-color: #bd2130;
}
</style>
{% endblock %}
